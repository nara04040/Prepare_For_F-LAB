# javascript 동작원리

구글의 chrome V8 엔진으로 빌드된 JavaScript의 런타임 환경인 **Node.js**의 등장으로 웹 브라우저를 벗어나 서버 사이드 앱 개발에서도 사용되는 범용 개발 언어가 되었다.

브라우저의 핵심 기능은 사용자가 참조하고자 하는 웹페이지를 서버에 "요청"하고 서버의 "응답"을 받아 브라우저에 표시하는 것이다.

브라우저는 서버로부터 HTML, CSS, JS, 이미지 등을 응답받는다.

HTML, CSS 파일은 렌더링 엔진의 HTML파서와 CSS 파서에 의해서 파싱되어 DOM, CSSOM 트리로 변환되고 렌더 트리로 결합된다.

<img src="./스크린샷%202022-12-19%20오전%201.54.37.png">

자바스크립트는 렌더링 엔진이 아닌 자바스크립트 엔진이 처리한다.

HTML 파서는 script 태그를 만나면 자바스크립트 코드를 실행하기 위해 DOM 생성 프로세서를 중지하고 자바스크립트 엔진으로 제어 권한을 넘겨준다.

권한을 넘겨받은 자바스크립트 엔진은 script 태그 안의 자바스크립트 코드를 로드하고 파싱시켜 실행한다.

자바스크립트 실행이 완료된다면 HTML 파서로 권한을 넘겨서 브라우저가 중지했던 시점부터 DOM생성을 재개한다.

> 실행 권한 넘어가는 순서
> HTML파서가 파싱 -> script를 만나고 DOM생성 중지, 자바스크립트 엔진으로 권한넘김 -> 자바스크립트엔진은 파일을 로드, 파싱 -> 스크립트를 파싱, 실행 후 HTML 파서로 권한 넘김 -> DOM생성 재개


브라우저는 동기적으로 HTML, CSS, JS를 처리하고, script태그의 위치에 따라서 블로킹이 발생한다.

